angular.module("angular-carousel",["ngTouch"]),angular.module("angular-carousel").directive("rnCarouselIndicators",[function(){return{restrict:"A",replace:!0,scope:{items:"=",index:"="},template:'<div class="rn-carousel-indicator {{items.length < 2 ? \'wt-hide\' : \'\'}}"><span ng-repeat="item in items" ng-click="$parent.index=$index" ng-class="{active: $index==$parent.index}"></span></div>'}}]),function(){"use strict";angular.module("angular-carousel").directive("rnCarousel",["$swipe","$window","$document","$parse","$compile",function(n,e,r,a,t){var i=0,u=75,o=.05,c=3;return{restrict:"A",scope:!0,compile:function(s,l){var d,f,p=s.children()[0].attributes,g=!1,v=!1,h=0,x=!1;return s.addClass("rn-carousel-slides"),s.children().addClass("rn-carousel-slide"),["ng-repeat","data-ng-repeat","x-ng-repeat"].every(function(n){var e=p[n];if(angular.isDefined(e)){var r=e.value.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),a=r[3];if(d=r[1],f=r[2],d)return angular.isDefined(l.rnCarouselBuffered)&&(v=!0,e.value=d+" in "+f+"|carouselSlice:carouselBufferIndex:carouselBufferSize",a&&(e.value+=" track by "+a)),g=!0,!1}return!0}),g||(s.children(),h=s.children().length),function(s,l,d){function p(){for(var n=[],e=0;h>e;e++)n[e]=e;s.carouselIndicatorArray=n}function I(){var n=R.children();return z=0===n.length?R[0].getBoundingClientRect().width:n[0].getBoundingClientRect().width,Math.floor(z)}function m(){X.css("width","100%"),X.css("width",I()+"px")}function $(n){isNaN(n)&&(n=s.carouselIndex*z),E=n;var e=-Math.round(E);e+=s.carouselBufferIndex*z,R[0].style[F]="translate3d("+e+"px, 0, 0)"}function w(){var n,e;q&&(n=Date.now()-j,e=q*Math.exp(-n/u),e>c||-c>e?($(P-e),requestAnimationFrame(w)):C(P/z))}function b(n){return n>=h?h:0>=n?0:n}function y(){var n=0,e=(s.carouselBufferSize-1)/2;v&&(n=s.carouselIndex<=e?0:s.carouselIndex>h-s.carouselBufferSize?h-s.carouselBufferSize:s.carouselIndex-e),s.carouselBufferIndex=n}function C(n,e){return isNaN(n)&&(n=s.carouselIndex),e?(E=n*z,k(null,null,!0),void 0):(s.carouselIndex=b(n),y(),"$apply"!==s.$$phase&&"$digest"!==s.$$phase&&(x?s.$apply():s.$digest()),$(),void 0)}function B(){return o*z}function D(n){k({x:n.clientX,y:n.clientY},n)}function S(n){var e=n;return 0===s.carouselIndex?e=Math.max(-B(),e):s.carouselIndex===h-1&&(e=Math.min((h-1)*z+B(),e)),e}function M(n,e){return r.bind("mouseup",D),O=!0,T=n.x,q=0,j=Date.now(),e.preventDefault(),e.stopPropagation(),!1}function A(n,e){var r,a;return O&&(r=n.x,a=T-r,(a>2||-2>a)&&(T=r,requestAnimationFrame(function(){$(S(E+a))}))),e.preventDefault(),e.stopPropagation(),!1}function k(n,e,a){r.unbind("mouseup",D),O=!1,P=E;var t=B(),i=s.carouselIndex*z,u=i-P,o=-Math[u>=0?"ceil":"floor"](u/z),c=Math.abs(u)>t;o+s.carouselIndex>=h&&(o=h-1-s.carouselIndex),o+s.carouselIndex<0&&(o=-s.carouselIndex);var l=c?o:0;return P=(l+s.carouselIndex)*z,q=P-E,j=Date.now(),a&&(q=E-i),requestAnimationFrame(w),e&&(e.preventDefault(),e.stopPropagation()),!1}function N(){m(),C()}i++;var z,F,O,T,q,P,j,E=0,R=l.wrap("<div id='carousel-"+i+"' class='rn-carousel-container'></div>"),X=R.parent();if(angular.isDefined(d.rnCarouselIndicator)){p(),s.$watch("carouselIndex",function(n){s.indicatorIndex=n}),s.$watch("indicatorIndex",function(n){C(n,!0)});var Y=t("<div id='carousel-"+i+"-indicator' index='indicatorIndex' items='carouselIndicatorArray' rn-carousel-indicators class='rn-carousel-indicator'></div>")(s);X.append(Y)}if(s.carouselBufferIndex=0,s.carouselBufferSize=5,s.carouselIndex=0,d.rnCarouselIndex){var L=a(d.rnCarouselIndex);angular.isFunction(L.assign)?(s.$watch("carouselIndex",function(n){L.assign(s.$parent,n)}),s.carouselIndex=L(s),s.$parent.$watch(L,function(n){void 0!==n&&C(n,!0)}),x=!0):isNaN(d.rnCarouselIndex)||(s.carouselIndex=parseInt(d.rnCarouselIndex,10))}g?s.$watchCollection(f,function(n){h=0,angular.isArray(n)?h=n.length:angular.isObject(n)&&(h=Object.keys(n).length),p(),z||m(),C(s.carouselIndex)}):m(),n.bind(R,{start:M,move:A,end:k,cancel:function(n){k({},n)}}),x||C(s.carouselIndex),F="transform",["webkit","Moz","O","ms"].every(function(n){var e=n+"Transform";return"undefined"!=typeof document.body.style[e]?(F=e,!1):!0});var W=angular.element(e);W.bind("orientationchange",N),W.bind("resize",N),s.$on("$destroy",function(){r.unbind("mouseup",D),W.unbind("orientationchange",N),W.unbind("resize",N)})}}}}])}(),function(){"use strict";angular.module("angular-carousel").filter("carouselSlice",function(){return function(n,e,r){return angular.isArray(n)?n.slice(e,e+r):angular.isObject(n)?n:void 0}})}();