/*!
author: remiel 
date: 2014-07-28 
*/
$.fn.lazyload=function(a){return this.each(function(b,c){var d=$(c);d.addClass("img_hide");var e=d.attr("lazyload"),f=document.createElement("img");f.onload=function(){c.src=e,d.addClass("img_show").removeClass("img_hide").removeAttr("lazyload"),"function"==typeof a&&a.call(this,"onload")},f.onerror=function(){console.log("img lazyload onerror"),"function"==typeof a&&a.call(this,"onerror")},f.src=e})},$(function(){var a={img:window.OE&&OE.shareImg?OE.shareImg:"http://weijing.qiniudn.com/shipimg_share.jpg",url:window.OE&&OE.shareLink?OE.shareLink:location.protocol+"//"+location.host+location.pathname+location.hash+location.search+"#",title:window.OE&&OE.title?OE.title:OE.userName+"想和你一起体验浪漫豪华邮轮之旅",desc:window.OE&&OE.content?OE.content:"全球几乎最美的天堂，一生必去的50个地方之一。微景旅游免费送你去。"};document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.on("menu:share:appmessage",function(){WeixinJSBridge.invoke("sendAppMessage",{img_url:a.img,link:a.url,desc:a.desc,title:a.title},function(){conf.callback()})}),WeixinJSBridge.on("menu:share:timeline",function(){WeixinJSBridge.invoke("shareTimeline",{img_url:a.img,link:a.url,desc:a.desc,title:a.title+" | "+a.desc},function(){})})}),$(".wx_indicator, .js-show-indicator").on("click",function(){$(".wx_indicator").toggle()})}),$(function(){function a(a,b){a.find("img[lazyload]").lazyload(function(){"function"==typeof b&&b.call(this)})}function b(a){var b=a.children(".js-img-char"),d=a.children(".js-img-bg");d[0].complete?c(b):d[0].addEventListener("load",function(){c(b)})}function c(a){setTimeout(function(){a.addClass("show")},500)}function d(a){setTimeout(function(){a.children(".js-arrow").toggleClass("show")},400)}function e(a){a.children(".js-counter").addClass("show")}var f=$(".m-carousel-inner"),g=f.find("li"),h=$(".m-carousel");a(g.eq(0),function(){var c=g.eq(0);b(c,!0),a(c.next()),setTimeout(function(){e(c),d(c)},1400)}),h.carousel().on("afterSlide",function(){var c=f.find(".m-active"),d=c.index(),e=g.eq(d);if(b(e,!1),d<g.length-1){var h=e.next();a(h)}})});