define(["OE"],function(a){function b(a){return"object"!=typeof a&&(a={}),this.options=d.extend({},{"class":"",value:0,callback:function(a){console.log("callback",a)}},a),this.init(),this.$el}console.log("module:Modifier");var c=a.utils,d=a.$;return b.prototype={init:function(){this.value=this.options.value?isNaN(this.options.value)?0:this.options.value:0,this.value<0&&(this.value=0),this.createElement(),this.bindEvt()},createElement:function(){this.$el=d('<div><div class="ui-modifier__minus"></div><div class="ui-modifier__bd"><input type="text" class="ui-modifier__ipt"></div><div class="ui-modifier__plus"></div></div>').addClass("ui-modifier").addClass(this.options.class),this.$plus=this.$el.find(".ui-modifier__plus"),this.$minus=this.$el.find(".ui-modifier__minus"),this.$ipt=this.$el.find(".ui-modifier__ipt"),this.$ipt.val(this.value)},bindEvt:function(){this.$plus.on(c.events.click+".ui-modifier",d.proxy(function(){console.log("+"),this.toChange("plus")},this)),this.$minus.on(c.events.click+".ui-modifier",d.proxy(function(){console.log("-"),this.toChange("minus")},this)),this.$ipt.on("change.ui-modifier",d.proxy(function(){var a=this.$ipt.val();a=a?isNaN(a)?0:a:0,0>a&&(a=0),this.hasChange(a),this.$ipt.val(a)},this))},toChange:function(a){var b,c=parseInt(this.$ipt.val());switch(a){case"plus":b=c+1,this.$ipt.val(b);break;case"minus":b=c>1?c-1:0,this.$ipt.val(b)}c!=b&&this.hasChange(b)},hasChange:function(a){console.log("Modifier:hasChange"),this.value=a,"function"==typeof this.options.callback&&this.options.callback.call(this,a)}},a.ui.Modifier=b,b});